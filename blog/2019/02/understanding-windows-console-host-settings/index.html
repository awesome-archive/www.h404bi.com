<!DOCTYPE html><html data-saber-ssr lang="zh-CN" class="serif black-footer" data-saber-head="lang,class"><head data-saber-head=""><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta data-saber-head="true" name="generator" content="Hexo"/><meta data-saber-head="true" name="keywords" content="Windows控制台,ConHost.exe,Windows控制台设置,Windows10控制台"/><meta data-saber-head="true" name="description" content="Windows Console Host（即 conhost.exe）中的设置（如命令行字体等）可能有点 难以理解，主要是因为在过去几十年中这个设置系统不断发展。根据 ConHost 如何 被调用，这些设置项会存储在不同的位置。"/> <title data-saber-head="true">彻底搞懂 Windows 控制台的设置 - Chawye Hsu, H404bi</title> <link data-saber-head="true" href="https://unpkg.com/ionicons@4.5.5/dist/css/ionicons.min.css" rel="stylesheet"/> <style data-vue-ssr-id="4359480e:0 2f482868:0 a3842570:0 1c3c026a:0">.saber-highlight{position:relative;margin:2rem 0;overflow:hidden;background:#f5f7fa;border-radius:4px}.saber-highlight:before{content:attr(data-lang);position:absolute;right:10px;top:5px;font-size:.75rem;color:#bdc5d1}.saber-highlight-code,.saber-highlight-mask{line-height:1.5;background-color:transparent!important;text-shadow:none!important;box-shadow:none!important;margin:0!important;padding:1.25rem 1.5rem!important;white-space:pre}.saber-highlight-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;color:transparent!important;padding-left:0!important;padding-right:0!important}.saber-highlight-code{position:relative;z-index:2}.code-line.highlighted{background:rgba(3,169,244,.121);box-shadow:inset 2px 0 0 0 rgba(3,169,244,.278)}
/*!
* DisqusJS - Default Theme | v1.2.3
* Author: SukkaW
* Link: https://github.com/SukkaW/DisqusJS
* License: MIT
*/#dsqjs *{margin:0;padding:0;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#dsqjs a{text-decoration:none;color:#076dd0}#dsqjs .dsqjs-hide{display:none!important}#dsqjs .dsqjs-disabled{cursor:not-allowed;opacity:.5}#dsqjs #dsqjs-msg{text-align:center;margin-top:4px;margin-bottom:4px;font-size:14px}#dsqjs #dsqjs-msg .dsqjs-msg-btn{cursor:pointer}#dsqjs .dsqjs-bullet{line-height:1.4;margin:0 2px}#dsqjs .dsqjs-bullet:after{color:#c2c6cc;content:"·";font-weight:700}#dsqjs .dsqjs-clearfix:after,#dsqjs .dsqjs-clearfix:before{display:table;content:"";line-height:0;clear:both}#dsqjs .dsqjs-nav{position:relative;margin:0 0 20px;border-bottom:2px solid #e7e9ee}#dsqjs ol,#dsqjs ul{list-style:none;list-style-type:none}#dsqjs .dsqjs-no-comment{text-align:center;font-size:16px;line-height:1.5;word-wrap:break-word;overflow:hidden;color:#2a2e2e;margin-bottom:6px}#dsqjs .dsqjs-nav-tab{float:left;text-transform:capitalize;font-size:15px;padding:12px 0;color:#656c7a;display:block;margin:0 15px 0 0;font-weight:700;line-height:1;position:relative;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}#dsqjs .dsqjs-nav-tab:last-child{margin:0}#dsqjs .dsqjs-tab-active{color:#2a2e2e}#dsqjs .dsqjs-tab-active>span:after{content:" ";display:block;height:2px;background-color:#076dd0!important;position:absolute;bottom:-2px;left:0;right:0}#dsqjs .dsqjs-post-list .dsqjs-post-item{position:relative;margin-bottom:16px}#dsqjs .dsqjs-post-list .dsqjs-post-avatar{float:left;margin-right:10px;position:relative;background:#dbdfe4;padding:0;display:block;border-radius:4px}#dsqjs .dsqjs-post-list .dsqjs-post-avatar img{width:44px;height:44px;display:block;border-radius:4px}#dsqjs .dsqjs-post-list .dsqjs-post-header{line-height:1;font-size:14px;margin-bottom:3px}#dsqjs .dsqjs-post-list .dsqjs-post-header .dsqjs-post-author{color:#656c7a;font-weight:700}#dsqjs .dsqjs-post-list .dsqjs-post-header .dsqjs-admin-badge{color:#fff;background:#687a86;padding:1px 3px;margin-left:4px;font-size:12px;line-height:1;font-weight:700;border-radius:3px;display:inline-block;position:relative;top:-1px;left:1px}#dsqjs .dsqjs-post-list .dsqjs-post-header .dsqjs-meta{display:inline-block;font-size:12px;color:#656c7a}#dsqjs .dsqjs-post-body{font-size:15px;line-height:1.5;word-wrap:break-word;overflow:hidden;color:#2a2e2e}#dsqjs .dsqjs-post-body code,#dsqjs .dsqjs-post-body pre{font-family:SF Mono,Segoe UI Mono,Consolas,Roboto Mono,Liberation Mono,Menlo,Courier,Courier New,monospace!important}#dsqjs .dsqjs-post-body code{padding:.2em .4em;margin:0;font-size:85%;background:#f5f5f5;color:inherit;border-radius:3px}#dsqjs .dsqjs-post-body pre{padding:.5em;overflow:auto;font-size:85%;line-height:1.45;border-radius:3px;background:#f5f5f5;margin:.5em 0}#dsqjs .dsqjs-post-body blockquote{padding:0 .8em;margin:.5em 0;color:#6a737d;border-left:.25em solid #dfe2e5}#dsqjs .dsqjs-post-body p:last-child{margin:0}#dsqjs .dsqjs-post-list.dsqjs-children>li{margin-left:30px}@media (min-width:768px){#dsqjs .dsqjs-post-list.dsqjs-children>li{margin-left:48px}#dsqjs .dsqjs-post-list .dsqjs-post-avatar{margin-right:12px}#dsqjs .dsqjs-post-list .dsqjs-post-item{margin-bottom:20px}}@media (min-width:1024px){#dsqjs .dsqjs-post-list.dsqjs-children>li{margin-left:60px}}#dsqjs .dsqjs-post-list.dsqjs-children .dsqjs-post-avatar img{width:38px;height:38px}#dsqjs .dsqjs-load-more{font-size:14px;font-weight:400;display:block;text-align:center;padding:11px 14px;margin:0 0 24px;background:#687a86;color:#fff;cursor:pointer}#dsqjs .dsqjs-load-more:hover{opacity:.8}#dsqjs footer{text-align:right;line-height:1.5;padding-top:12px;font-weight:700;font-size:16px;color:#555}#dsqjs .dsqjs-disqus-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 438 80'%3E%3Cpath fill='%23575B5D' d='M30.2 1.6H1v76h28.9C57 77.6 73 61.3 73 39.4v-.2c0-22-15.7-37.6-42.9-37.6zm21.3 38.1c0 12.3-8.4 19.3-21 19.3H22V20.3h8.5c12.6 0 21 7 21 19.2v.2zm35.6 38h21.2V1.5H87.1v76zm70-47.4c-10.4-2.4-13-4-13-7.4v-.2c0-2.7 2.4-5 7.6-5 6.7 0 14.3 2.7 21.2 7.6l10.6-14.9A47.9 47.9 0 0 0 152.2.3c-18.3 0-29.4 10.2-29.4 24.3v.2c0 15.7 12.4 20.3 28.6 24 10.4 2.3 12.9 4 12.9 7.2v.2c0 3.3-3 5.2-8.7 5.2-8.8 0-17.2-3.1-24.7-9l-11.7 14a53.1 53.1 0 0 0 35.6 12.5c18.5 0 30.7-9.2 30.7-24.7V54c0-14.3-10.8-20-28.3-23.7zm120.7 9.3v-.2A39.5 39.5 0 0 0 236.9.1c-23.4 0-41 17.7-41 39.5v.2a39.5 39.5 0 0 0 40.8 39.4c8.7 0 16.6-2.5 23.1-6.8l8.4 7.5L279 68.1l-7.9-6.6a38 38 0 0 0 6.8-21.9zm-21.4.5c0 2.6-.5 5-1.3 7.3l-10.4-9.3-10.6 12 10.5 9a21.7 21.7 0 0 1-7.7 1.4c-11.6 0-19.4-9.7-19.4-20.7v-.2c0-11 7.7-20.5 19.2-20.5 11.7 0 19.7 9.7 19.7 20.7v.3zm83.5 4.3c0 10.6-5.5 15.6-14 15.6s-14-5.2-14-16.1V1.6h-21.4v42.7C290.5 68 304 79 325.7 79s35.6-10.8 35.6-35.3V1.5h-21.4v42.8zm68.9-14.1c-10.6-2.4-13.2-4-13.2-7.4v-.2c0-2.7 2.5-5 7.6-5 6.8 0 14.4 2.7 21.3 7.6l10.6-14.9A47.9 47.9 0 0 0 403.8.3c-18.3 0-29.5 10.2-29.5 24.3v.2c0 15.7 12.5 20.3 28.7 24 10.3 2.3 12.8 4 12.8 7.2v.2c0 3.3-3 5.3-8.7 5.3-8.8 0-17.1-3.2-24.6-9.2l-11.7 14A53.1 53.1 0 0 0 406.4 79c18.5 0 30.7-9.2 30.7-24.7V54c0-14.3-10.8-20-28.3-23.7z'/%3E%3C/svg%3E");background-position:50% 50%;background-repeat:no-repeat;display:inline-block;height:12px;width:65.7px}#dsqjs .dsqjs-order{display:-webkit-box;display:-ms-flexbox;display:flex;float:right;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-bottom:12px}#dsqjs .dsqjs-order-radio{display:none}#dsqjs .dsqjs-order-radio:checked+.dsqjs-order-label{color:#fff;background-color:#888}#dsqjs .dsqjs-order-label{display:block;height:20px;line-height:20px;margin-right:10px;font-size:12px;border-radius:2px;padding:0 5px;background-color:#dcdcdc;cursor:pointer}
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}
@font-face{font-family:Biaodian;src:local("Source Han Sans SC"),local("Noto Sans CJK SC"),local("Songti SC"),local(SimSun);unicode-range:U+00b7,U+2014,U+2026,U+300c-300f,U+300a-300b,U+3008-3009,U+3014-3015,U+ff08-ff09,U+ff1b,U+ff1a,U+ff1f,U+ff01;font-display:swap}@font-face{font-family:Manuale;font-style:normal;font-weight:400;src:local("Manuale Regular"),local("Manuale-Regular"),url(https://fonts.gstatic.com/s/manuale/v2/GZclXQABgtQ3ixbtHDZw8ALUuEpTyoUstqEm5AMlJo4.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Manuale;font-style:italic;font-weight:400;src:local("Manuale Italic"),local("Manuale-Italic"),url(https://fonts.gstatic.com/s/manuale/v2/xZ9C1Yri1LjAbXXQlZqtspBw1xU1rKptJj_0jans920.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Manuale;font-style:normal;font-weight:600;src:local("Manuale SemiBold"),local("Manuale-SemiBold"),url(https://fonts.gstatic.com/s/manuale/v2/-1zNbtzePZeDhwEh9NB0wgzyDMXhdD8sAj6OAJTFsBI.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Manuale;font-style:italic;font-weight:600;src:local("Manuale SemiBold Italic"),local("Manuale-SemiBoldItalic"),url(https://fonts.gstatic.com/s/manuale/v2/n25GBfdDLxRFJ-OYtzyorRampu5_7CjHW5spxoeN3Vs.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans"),local("OpenSans"),url(https://fonts.gstatic.com/s/opensans/v13/cJZKeOuBrn4kERxqtaUH3ZBw1xU1rKptJj_0jans920.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Open Sans;font-style:italic;font-weight:400;src:local("Open Sans Italic"),local("OpenSans-Italic"),url(https://fonts.gstatic.com/s/opensans/v13/xjAJXh38I15wypJXxuGMBogp9Q8gbYrhqGlRav_IXfk.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans Semibold"),local("OpenSans-Semibold"),url(https://fonts.gstatic.com/s/opensans/v13/MTP_ySUJH_bn48VBG8sNShampu5_7CjHW5spxoeN3Vs.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@font-face{font-family:Open Sans;font-style:italic;font-weight:600;src:local("Open Sans Semibold Italic"),local("OpenSans-SemiboldItalic"),url(https://fonts.gstatic.com/s/opensans/v13/PRmiXeptR36kaC0GEAetxsiAiQ_a33snTsJhwZvMEaI.woff2) format("woff2");unicode-range:U+0000-00b6,U+00b8-00ff,U+0131,U+0152-0153,U+02c6,U+02da,U+02dc,U+2000-2013,U+2015-2025,U+2027-206f,U+2074,U+20ac,U+2212,U+2215;font-display:swap}@-moz-keyframes spinAround{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@-webkit-keyframes spinAround{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@-o-keyframes spinAround{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@keyframes spinAround{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}.column{display:block;flex-basis:0;flex-grow:1;flex-shrink:1;padding:.8889rem}.columns.is-mobile>.column.is-narrow{flex:none}.columns.is-mobile>.column.is-full{flex:none;width:100%}.columns.is-mobile>.column.is-three-quarters{flex:none;width:75%}.columns.is-mobile>.column.is-two-thirds{flex:none;width:66.6666%}.columns.is-mobile>.column.is-half{flex:none;width:50%}.columns.is-mobile>.column.is-one-third{flex:none;width:33.3333%}.columns.is-mobile>.column.is-one-quarter{flex:none;width:25%}.columns.is-mobile>.column.is-offset-three-quarters{margin-left:75%}.columns.is-mobile>.column.is-offset-two-thirds{margin-left:66.6666%}.columns.is-mobile>.column.is-offset-half{margin-left:50%}.columns.is-mobile>.column.is-offset-one-third{margin-left:33.3333%}.columns.is-mobile>.column.is-offset-one-quarter{margin-left:25%}.columns.is-mobile>.column.is-1{flex:none;width:8.333333333333332%}.columns.is-mobile>.column.is-offset-1{margin-left:8.333333333333332%}.columns.is-mobile>.column.is-2{flex:none;width:16.666666666666664%}.columns.is-mobile>.column.is-offset-2{margin-left:16.666666666666664%}.columns.is-mobile>.column.is-3{flex:none;width:25%}.columns.is-mobile>.column.is-offset-3{margin-left:25%}.columns.is-mobile>.column.is-4{flex:none;width:33.33333333333333%}.columns.is-mobile>.column.is-offset-4{margin-left:33.33333333333333%}.columns.is-mobile>.column.is-5{flex:none;width:41.66666666666667%}.columns.is-mobile>.column.is-offset-5{margin-left:41.66666666666667%}.columns.is-mobile>.column.is-6{flex:none;width:50%}.columns.is-mobile>.column.is-offset-6{margin-left:50%}.columns.is-mobile>.column.is-7{flex:none;width:58.333333333333336%}.columns.is-mobile>.column.is-offset-7{margin-left:58.333333333333336%}.columns.is-mobile>.column.is-8{flex:none;width:66.66666666666666%}.columns.is-mobile>.column.is-offset-8{margin-left:66.66666666666666%}.columns.is-mobile>.column.is-9{flex:none;width:75%}.columns.is-mobile>.column.is-offset-9{margin-left:75%}.columns.is-mobile>.column.is-10{flex:none;width:83.33333333333334%}.columns.is-mobile>.column.is-offset-10{margin-left:83.33333333333334%}.columns.is-mobile>.column.is-11{flex:none;width:91.66666666666666%}.columns.is-mobile>.column.is-offset-11{margin-left:91.66666666666666%}.columns.is-mobile>.column.is-12{flex:none;width:100%}.columns.is-mobile>.column.is-offset-12{margin-left:100%}@media screen and (max-width:768px){.column.is-narrow-mobile{flex:none}.column.is-full-mobile{flex:none;width:100%}.column.is-three-quarters-mobile{flex:none;width:75%}.column.is-two-thirds-mobile{flex:none;width:66.6666%}.column.is-half-mobile{flex:none;width:50%}.column.is-one-third-mobile{flex:none;width:33.3333%}.column.is-one-quarter-mobile{flex:none;width:25%}.column.is-offset-three-quarters-mobile{margin-left:75%}.column.is-offset-two-thirds-mobile{margin-left:66.6666%}.column.is-offset-half-mobile{margin-left:50%}.column.is-offset-one-third-mobile{margin-left:33.3333%}.column.is-offset-one-quarter-mobile{margin-left:25%}.column.is-1-mobile{flex:none;width:8.333333333333332%}.column.is-offset-1-mobile{margin-left:8.333333333333332%}.column.is-2-mobile{flex:none;width:16.666666666666664%}.column.is-offset-2-mobile{margin-left:16.666666666666664%}.column.is-3-mobile{flex:none;width:25%}.column.is-offset-3-mobile{margin-left:25%}.column.is-4-mobile{flex:none;width:33.33333333333333%}.column.is-offset-4-mobile{margin-left:33.33333333333333%}.column.is-5-mobile{flex:none;width:41.66666666666667%}.column.is-offset-5-mobile{margin-left:41.66666666666667%}.column.is-6-mobile{flex:none;width:50%}.column.is-offset-6-mobile{margin-left:50%}.column.is-7-mobile{flex:none;width:58.333333333333336%}.column.is-offset-7-mobile{margin-left:58.333333333333336%}.column.is-8-mobile{flex:none;width:66.66666666666666%}.column.is-offset-8-mobile{margin-left:66.66666666666666%}.column.is-9-mobile{flex:none;width:75%}.column.is-offset-9-mobile{margin-left:75%}.column.is-10-mobile{flex:none;width:83.33333333333334%}.column.is-offset-10-mobile{margin-left:83.33333333333334%}.column.is-11-mobile{flex:none;width:91.66666666666666%}.column.is-offset-11-mobile{margin-left:91.66666666666666%}.column.is-12-mobile{flex:none;width:100%}.column.is-offset-12-mobile{margin-left:100%}}@media screen and (min-width:769px){.column.is-narrow,.column.is-narrow-tablet{flex:none}.column.is-full,.column.is-full-tablet{flex:none;width:100%}.column.is-three-quarters,.column.is-three-quarters-tablet{flex:none;width:75%}.column.is-two-thirds,.column.is-two-thirds-tablet{flex:none;width:66.6666%}.column.is-half,.column.is-half-tablet{flex:none;width:50%}.column.is-one-third,.column.is-one-third-tablet{flex:none;width:33.3333%}.column.is-one-quarter,.column.is-one-quarter-tablet{flex:none;width:25%}.column.is-offset-three-quarters,.column.is-offset-three-quarters-tablet{margin-left:75%}.column.is-offset-two-thirds,.column.is-offset-two-thirds-tablet{margin-left:66.6666%}.column.is-offset-half,.column.is-offset-half-tablet{margin-left:50%}.column.is-offset-one-third,.column.is-offset-one-third-tablet{margin-left:33.3333%}.column.is-offset-one-quarter,.column.is-offset-one-quarter-tablet{margin-left:25%}.column.is-1,.column.is-1-tablet{flex:none;width:8.333333333333332%}.column.is-offset-1,.column.is-offset-1-tablet{margin-left:8.333333333333332%}.column.is-2,.column.is-2-tablet{flex:none;width:16.666666666666664%}.column.is-offset-2,.column.is-offset-2-tablet{margin-left:16.666666666666664%}.column.is-3,.column.is-3-tablet{flex:none;width:25%}.column.is-offset-3,.column.is-offset-3-tablet{margin-left:25%}.column.is-4,.column.is-4-tablet{flex:none;width:33.33333333333333%}.column.is-offset-4,.column.is-offset-4-tablet{margin-left:33.33333333333333%}.column.is-5,.column.is-5-tablet{flex:none;width:41.66666666666667%}.column.is-offset-5,.column.is-offset-5-tablet{margin-left:41.66666666666667%}.column.is-6,.column.is-6-tablet{flex:none;width:50%}.column.is-offset-6,.column.is-offset-6-tablet{margin-left:50%}.column.is-7,.column.is-7-tablet{flex:none;width:58.333333333333336%}.column.is-offset-7,.column.is-offset-7-tablet{margin-left:58.333333333333336%}.column.is-8,.column.is-8-tablet{flex:none;width:66.66666666666666%}.column.is-offset-8,.column.is-offset-8-tablet{margin-left:66.66666666666666%}.column.is-9,.column.is-9-tablet{flex:none;width:75%}.column.is-offset-9,.column.is-offset-9-tablet{margin-left:75%}.column.is-10,.column.is-10-tablet{flex:none;width:83.33333333333334%}.column.is-offset-10,.column.is-offset-10-tablet{margin-left:83.33333333333334%}.column.is-11,.column.is-11-tablet{flex:none;width:91.66666666666666%}.column.is-offset-11,.column.is-offset-11-tablet{margin-left:91.66666666666666%}.column.is-12,.column.is-12-tablet{flex:none;width:100%}.column.is-offset-12,.column.is-offset-12-tablet{margin-left:100%}}@media screen and (min-width:1000px){.column.is-narrow-desktop{flex:none}.column.is-full-desktop{flex:none;width:100%}.column.is-three-quarters-desktop{flex:none;width:75%}.column.is-two-thirds-desktop{flex:none;width:66.6666%}.column.is-half-desktop{flex:none;width:50%}.column.is-one-third-desktop{flex:none;width:33.3333%}.column.is-one-quarter-desktop{flex:none;width:25%}.column.is-offset-three-quarters-desktop{margin-left:75%}.column.is-offset-two-thirds-desktop{margin-left:66.6666%}.column.is-offset-half-desktop{margin-left:50%}.column.is-offset-one-third-desktop{margin-left:33.3333%}.column.is-offset-one-quarter-desktop{margin-left:25%}.column.is-1-desktop{flex:none;width:8.333333333333332%}.column.is-offset-1-desktop{margin-left:8.333333333333332%}.column.is-2-desktop{flex:none;width:16.666666666666664%}.column.is-offset-2-desktop{margin-left:16.666666666666664%}.column.is-3-desktop{flex:none;width:25%}.column.is-offset-3-desktop{margin-left:25%}.column.is-4-desktop{flex:none;width:33.33333333333333%}.column.is-offset-4-desktop{margin-left:33.33333333333333%}.column.is-5-desktop{flex:none;width:41.66666666666667%}.column.is-offset-5-desktop{margin-left:41.66666666666667%}.column.is-6-desktop{flex:none;width:50%}.column.is-offset-6-desktop{margin-left:50%}.column.is-7-desktop{flex:none;width:58.333333333333336%}.column.is-offset-7-desktop{margin-left:58.333333333333336%}.column.is-8-desktop{flex:none;width:66.66666666666666%}.column.is-offset-8-desktop{margin-left:66.66666666666666%}.column.is-9-desktop{flex:none;width:75%}.column.is-offset-9-desktop{margin-left:75%}.column.is-10-desktop{flex:none;width:83.33333333333334%}.column.is-offset-10-desktop{margin-left:83.33333333333334%}.column.is-11-desktop{flex:none;width:91.66666666666666%}.column.is-offset-11-desktop{margin-left:91.66666666666666%}.column.is-12-desktop{flex:none;width:100%}.column.is-offset-12-desktop{margin-left:100%}}@media screen and (min-width:1192px){.column.is-narrow-widescreen{flex:none}.column.is-full-widescreen{flex:none;width:100%}.column.is-three-quarters-widescreen{flex:none;width:75%}.column.is-two-thirds-widescreen{flex:none;width:66.6666%}.column.is-half-widescreen{flex:none;width:50%}.column.is-one-third-widescreen{flex:none;width:33.3333%}.column.is-one-quarter-widescreen{flex:none;width:25%}.column.is-offset-three-quarters-widescreen{margin-left:75%}.column.is-offset-two-thirds-widescreen{margin-left:66.6666%}.column.is-offset-half-widescreen{margin-left:50%}.column.is-offset-one-third-widescreen{margin-left:33.3333%}.column.is-offset-one-quarter-widescreen{margin-left:25%}.column.is-1-widescreen{flex:none;width:8.333333333333332%}.column.is-offset-1-widescreen{margin-left:8.333333333333332%}.column.is-2-widescreen{flex:none;width:16.666666666666664%}.column.is-offset-2-widescreen{margin-left:16.666666666666664%}.column.is-3-widescreen{flex:none;width:25%}.column.is-offset-3-widescreen{margin-left:25%}.column.is-4-widescreen{flex:none;width:33.33333333333333%}.column.is-offset-4-widescreen{margin-left:33.33333333333333%}.column.is-5-widescreen{flex:none;width:41.66666666666667%}.column.is-offset-5-widescreen{margin-left:41.66666666666667%}.column.is-6-widescreen{flex:none;width:50%}.column.is-offset-6-widescreen{margin-left:50%}.column.is-7-widescreen{flex:none;width:58.333333333333336%}.column.is-offset-7-widescreen{margin-left:58.333333333333336%}.column.is-8-widescreen{flex:none;width:66.66666666666666%}.column.is-offset-8-widescreen{margin-left:66.66666666666666%}.column.is-9-widescreen{flex:none;width:75%}.column.is-offset-9-widescreen{margin-left:75%}.column.is-10-widescreen{flex:none;width:83.33333333333334%}.column.is-offset-10-widescreen{margin-left:83.33333333333334%}.column.is-11-widescreen{flex:none;width:91.66666666666666%}.column.is-offset-11-widescreen{margin-left:91.66666666666666%}.column.is-12-widescreen{flex:none;width:100%}.column.is-offset-12-widescreen{margin-left:100%}}.columns{margin-left:-.8889rem;margin-right:-.8889rem;margin-top:-.8889rem}.columns:last-child{margin-bottom:-.8889rem}.columns:not(:last-child){margin-bottom:.8889rem}.columns.is-centered{justify-content:center}.columns.is-gapless{margin-left:0;margin-right:0;margin-top:0}.columns.is-gapless:last-child{margin-bottom:0}.columns.is-gapless:not(:last-child){margin-bottom:1.5rem}.columns.is-gapless>.column{margin:0;padding:0}@media screen and (min-width:769px){.columns.is-grid{flex-wrap:wrap}.columns.is-grid>.column{max-width:33.3333%;padding:.8889rem;width:33.3333%}.columns.is-grid>.column+.column{margin-left:0}}.columns.is-mobile{display:flex}.columns.is-multiline{flex-wrap:wrap}.columns.is-vcentered{align-items:center}@media screen and (min-width:769px){.columns:not(.is-desktop){display:flex}}@media screen and (min-width:1000px){.columns.is-desktop{display:flex}}@-moz-keyframes slideUp{0%{transform:translateY(0)}to{transform:translateY(-100%)}}@-webkit-keyframes slideUp{0%{transform:translateY(0)}to{transform:translateY(-100%)}}@-o-keyframes slideUp{0%{transform:translateY(0)}to{transform:translateY(-100%)}}@keyframes slideUp{0%{transform:translateY(0)}to{transform:translateY(-100%)}}@-moz-keyframes slideDown{0%{transform:translateY(-100%)}to{transform:translateY(0)}}@-webkit-keyframes slideDown{0%{transform:translateY(-100%)}to{transform:translateY(0)}}@-o-keyframes slideDown{0%{transform:translateY(-100%)}to{transform:translateY(0)}}@keyframes slideDown{0%{transform:translateY(-100%)}to{transform:translateY(0)}}.text-center{text-align:center}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}html{-webkit-font-smoothing:antialiased;box-sizing:border-box;color:#3d464d;font:87.5%/1.7778 Open Sans,Source Han Sans SC,Noto Sans CJK SC,PingFang SC,Hiragino Sans GB,WenQuanYi Micro Hei,Microsoft Yahei,sans-serif;font-feature-settings:"liga" 1,"pnum" 1,"kern" 1;text-rendering:optimizeLegibility;text-size-adjust:100%}html.serif,html:lang(en){font-family:Manuale,Times New Roman,"Source Han Serif SC","Noto Serif CJK SC",STFangsong,FangSong,FangSong_GB2312,serif}html.serif h1,html.serif h2,html.serif h3,html.serif h4,html.serif h5,html.serif h6,html:lang(en) h1,html:lang(en) h2,html:lang(en) h3,html:lang(en) h4,html:lang(en) h5,html:lang(en) h6{font-family:Manuale,Times New Roman,"Source Han Serif SC","Noto Serif CJK SC",Kaiti SC,STKaiti,KaiTi,KaiTi_GB2312,serif}body{background:#fff;height:100%;max-height:100%}*,:after,:before{box-sizing:inherit}::selection{background:#1d1f21;color:#fffffe}address,blockquote,dl,figure,hr,ol,p,pre,table,ul{margin-bottom:.8889rem}a{color:inherit;text-decoration:none}a:focus,a:hover{color:#009688}.stie-container{display:flex;height:100vh;flex-direction:column}.mina-wrapper{flex:1 0 auto;margin:0 auto;max-width:60rem;padding:1.7778rem 1.7778rem 0;width:100%}h1,h2,h3,h4,h5,h6{margin-bottom:.8889rem}.h1,h1{font-size:1.4445rem}.h2,h2{font-size:1.2223rem}.h3,h3{font-size:1.1111rem}.h4,h4{font-size:1rem}.h5,.h6,h5,h6{font-size:.8889rem}.h6,h6{color:#9ea3a6}small{font-size:.8rem}.site-header{align-items:center;background-color:#fffffe;color:#3d464d;box-shadow:0 0 35px 0 rgba(2,2,2,.08);display:flex;justify-content:center;padding:.8889rem 0}.site-header .columns{padding:0 .8889rem;width:100%;max-width:60rem}.site-header .topbar-nav-wrap{text-align:right}.site-header .topbar-nav ul{list-style:none;margin-bottom:0;padding-left:0}.site-header .topbar-nav ul li{display:inline-block}.site-header .topbar-nav ul li+li{margin-left:.8889rem}.headroom--unpinned .site-header{box-shadow:none}html.black-header .site-header{background-color:#1d1f21;color:#999a9b}.post-list{display:flex;flex-wrap:wrap;padding:0}.post-list .post-card-wrap.column{padding:.4445rem}.post-list .post-card-wrap{display:flex}.post-list .post-card{width:100%}.post-list .post-card .post-card-image{position:relative;width:100%;background-color:#fafafa;background-position:50%;background-repeat:no-repeat;background-size:cover;overflow:hidden}.post-list .post-card .post-card-image:after{content:"";display:block;padding-bottom:75%;width:100%}.post-list .post-card .post-card-image a.link{position:absolute;top:0;left:0;width:100%;height:100%}.post-list .post-card .post-card-image a.link img{display:block;width:100%;object-fit:cover}.post-list .post-card .post-card-image a.link .overlay{position:absolute;top:0;left:0;width:100%;height:100%}.post-list .post-card .post-card-info{padding:.4445rem;word-break:break-all;text-align:justify}.post-list .post-card .post-card-info .post-title{font-size:.8889rem}.post-list .post-list-item{list-style:none}.post-list .post-list-item .post-title{display:block;margin:0}.post-list .post-list-item .post-meta{color:#9ea3a6;display:block;font-size:.8rem;font-style:italic}.pagination .prev-wrap{display:flex;justify-content:flex-start}.pagination .next-wrap{display:flex;justify-content:flex-end}.pagination a{display:flex;align-items:center}.pagination a .icon{padding-top:2px}.pagination a .text{margin:0 .4445rem}.post-content{margin:0 auto;max-width:40rem}.post-content .post-header{margin-bottom:.8889rem;text-align:center}.post-content .post-header h1{margin-bottom:0}.post-content .post-header .post-meta{color:#9ea3a6}.post-content .post-body{margin-bottom:3.5556rem}.post-content .post-body a:not([id^=fnref]){border-bottom:1px dashed #9ea3a6;overflow-wrap:break-word;word-break:break-all}.post-content .post-body h1:hover .header-anchor,.post-content .post-body h2:hover .header-anchor,.post-content .post-body h3:hover .header-anchor,.post-content .post-body h4:hover .header-anchor,.post-content .post-body h5:hover .header-anchor,.post-content .post-body h6:hover .header-anchor{visibility:visible}.post-content .post-body .header-anchor{margin-left:-1.27406037rem;visibility:hidden}.post-content .post-body>p{text-align:justify}.post-content .post-body>table{border-collapse:collapse;border-spacing:0;display:block;overflow:auto;width:100%}.post-content .post-body>table tr:nth-child(2n){background-color:#f5f5f5}.post-content .post-body>table tr td,.post-content .post-body>table tr th{border:1px solid #dfe2e5;padding:.4445rem .8889rem;white-space:nowrap}.post-content .post-body blockquote{border-left:2px solid #009688;font-style:italic;padding-left:.8889rem;overflow-wrap:break-word;word-break:break-all}.post-content .post-body blockquote p:last-child{margin:0}.post-content .post-body ol,.post-content .post-body ul{margin-bottom:.8889rem;padding-left:1.33335rem}.post-content .post-body ol p,.post-content .post-body ul p{margin-bottom:0}.post-content .post-body ul{list-style-type:square}.post-content .post-body li ol,.post-content .post-body li ul{margin-bottom:0}.post-content .post-body code,.post-content .post-body pre{font-family:Monaco,Consolas,Lucida Console,monospace;font-size:.875rem}.post-content .post-body pre{line-height:1.5}.post-content .post-body code{background:#f5f5f5;padding:.111125rem .22225rem}.post-content .post-body .saber-highlight{margin:0 0 .8889rem;overflow:hidden;background:#f5f5f5;border-radius:0;box-shadow:none}.post-content .post-body .saber-highlight:before{content:attr(data-lang);position:absolute;right:.4445rem;top:.22225rem;font-size:.725rem;color:#9ea3a6}.post-content .post-body .saber-highlight pre{padding:.8889rem!important;overflow:auto}.post-content .post-body .saber-highlight code{background:none;padding:0}.post-content .post-body .meta,.post-content .post-body del,.post-content .post-body s{color:#9ea3a6}.post-content .post-body hr{border:0;border-bottom:2px solid #9ea3a6;margin:0 auto 1.7778rem;opacity:.5;padding-top:.8889rem;width:6rem}.post-content .post-body hr.footnotes-sep{margin-top:.8889rem}.post-content .post-body sub,.post-content .post-body sup{font-size:.725rem}.post-content .post-body sub a,.post-content .post-body sup a{color:#009688}.post-content .post-body img{max-width:100%}.post-content .post-body p img{display:block;margin:0 auto}.post-content .post-body>img{margin-bottom:.8889rem}.post-content .post-body figure{text-align:center}.post-content .post-body figure figcaption{color:#9ea3a6;font-size:.8rem;text-align:center}.post-content .post-body figure figcaption p{margin:0}.post-content .post-body figure.highlight,.post-content .post-body figure blockquote{text-align:left}.post-content .post-body .footnotes{color:#9ea3a6;font-size:.7778rem}.post-content .post-body .footnotes p{margin-bottom:.8889rem}.post-content .post-body .footnotes p a{border:0}.post-content .post-body .footnotes p a.footnote-backref{text-decoration:underline}.post-content .post-comments{margin-bottom:1.7778rem}.post-content .post-comments #load-disqus{color:#9ea3a6;text-align:center}.site-footer{background-color:#fafafa;margin-top:1.7778rem;color:#3d464d;padding:.8889rem 0}.site-footer ul{list-style-type:none;margin:0}.site-footer ul li{display:inline-block}.site-footer ul li+li{margin-left:.8889rem}.site-footer .footer__section{margin-bottom:.8889rem;text-align:center}.site-footer .footer__section:last-child{margin:0}.site-footer .copy-right{font-size:.8rem}.site-footer p{margin:0}.site-footer p a{text-decoration:underline}html.black-footer .site-footer{background-color:#1d1f21;color:#999a9b}@media (min-width:30rem){html{font-size:100%}.site-header .columns{padding:0 1.7778rem}.mina-wrapper{padding:3.5556rem 1.7778rem 0}.post-list .post-card-wrap.column{padding:.8889rem}.post-content figure.left,.post-content figure.right{max-width:40%}.post-content figure.left{float:left;margin-right:1.7778rem}.post-content figure.right{float:right;margin-left:1.7778rem}}@media (min-width:60rem){html{font-size:112.5%}.site-header .columns{padding:0 1.7778rem}.pagination{padding:0 .8889rem}.post-content figure.left,.post-content figure.right{max-width:50%}.post-content figure.left{margin-left:-25%}.post-content figure.right{margin-right:-25%}.site-footer{padding:1.7778rem 0}}html #dsqjs *{font-family:inheirt}html.serif #dsqjs *,html:lang(en) #dsqjs *{font-family:Manuale,Times New Roman,"Source Han Serif SC","Noto Serif CJK SC",STFangsong,FangSong,FangSong_GB2312,serif}#dsqjs a{color:inherit}#dsqjs a:hover{color:#009688}#dsqjs .dsqjs-disqus-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 438 80'%3E%3Cpath fill='%23575B5D' d='M30.2 1.6H1v76h28.9C57 77.6 73 61.3 73 39.4v-.2c0-22-15.7-37.6-42.9-37.6zm21.3 38.1c0 12.3-8.4 19.3-21 19.3H22V20.3h8.5c12.6 0 21 7 21 19.2v.2zm35.6 38h21.2V1.5H87.1v76zm70-47.4c-10.4-2.4-13-4-13-7.4v-.2c0-2.7 2.4-5 7.6-5 6.7 0 14.3 2.7 21.2 7.6l10.6-14.9A47.9 47.9 0 0 0 152.2.3c-18.3 0-29.4 10.2-29.4 24.3v.2c0 15.7 12.4 20.3 28.6 24 10.4 2.3 12.9 4 12.9 7.2v.2c0 3.3-3 5.2-8.7 5.2-8.8 0-17.2-3.1-24.7-9l-11.7 14a53.1 53.1 0 0 0 35.6 12.5c18.5 0 30.7-9.2 30.7-24.7V54c0-14.3-10.8-20-28.3-23.7zm120.7 9.3v-.2A39.5 39.5 0 0 0 236.9.1c-23.4 0-41 17.7-41 39.5v.2a39.5 39.5 0 0 0 40.8 39.4c8.7 0 16.6-2.5 23.1-6.8l8.4 7.5L279 68.1l-7.9-6.6a38 38 0 0 0 6.8-21.9zm-21.4.5c0 2.6-.5 5-1.3 7.3l-10.4-9.3-10.6 12 10.5 9a21.7 21.7 0 0 1-7.7 1.4c-11.6 0-19.4-9.7-19.4-20.7v-.2c0-11 7.7-20.5 19.2-20.5 11.7 0 19.7 9.7 19.7 20.7v.3zm83.5 4.3c0 10.6-5.5 15.6-14 15.6s-14-5.2-14-16.1V1.6h-21.4v42.7C290.5 68 304 79 325.7 79s35.6-10.8 35.6-35.3V1.5h-21.4v42.8zm68.9-14.1c-10.6-2.4-13.2-4-13.2-7.4v-.2c0-2.7 2.5-5 7.6-5 6.8 0 14.4 2.7 21.3 7.6l10.6-14.9A47.9 47.9 0 0 0 403.8.3c-18.3 0-29.5 10.2-29.5 24.3v.2c0 15.7 12.5 20.3 28.7 24 10.3 2.3 12.8 4 12.8 7.2v.2c0 3.3-3 5.3-8.7 5.3-8.8 0-17.1-3.2-24.6-9.2l-11.7 14A53.1 53.1 0 0 0 406.4 79c18.5 0 30.7-9.2 30.7-24.7V54c0-14.3-10.8-20-28.3-23.7z'/%3E%3C/svg%3E")}</style></head><body data-saber-head=""><div id="_saber" data-server-rendered="true"><div class="stie-container"><div class="site-header-room" style="height:px;"><div class="headroom" style="position:relative;top:0;left:0;right:0;z-index:9999;"><header id="site-header" class="site-header"><div class="wrap columns is-gapless is-mobile"><div class="column is-3-desktop"><a href="/blog" class="site-title router-link-active">
          Chawye Hsu's Blog
        </a></div> <div class="topbar-nav-wrap column is-9-desktop"><nav class="topbar-nav"><ul><li><a href="/" class="router-link-active">Home</a></li><li><a href="/about">About</a></li></ul></nav></div></div></header></div></div> <main id="site-main" class="mina-wrapper"><div id="post" class="post-content"><article itemscope="itemscope" itemtype="http://schema.org/Article"><header class="post-header"><h1 class="page-title">彻底搞懂 Windows 控制台的设置</h1></header> <section class="post-body"><p>Windows Console Host（即 <code>conhost.exe</code>，下称“ConHost”<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>）中的设置可能有点难以理解，主要是因为在过去几十年中这个设置系统不断发展。根据 ConHost 如何被调用，这些设置项会存储在不同的位置。</p> <figure data-type="image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" alt="控制台设置" data-src="/uploads/2019/02/20190218001.png"><figcaption>控制台设置</figcaption></figure> <h2 id="%E8%AE%BE%E7%BD%AE%E5%8A%A0%E8%BD%BD%E7%9A%84%E5%B1%82%E7%BA%A7">设置加载的层级</h2> <p>决定一个控制台设置的加载与存储是基于以下层级进行的：</p> <ol><li>写死在 conhostv2.dll 里面的设置</li> <li>用户定义的控制台默认设置，存储在注册表 <code>HKCU\Console</code> 中</li> <li>每个控制台应用程序<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>单独的设置，存储在注册表 <code>HKCU\Console\&lt;sub-key&gt;</code> 中，其中 <code>sub-key</code> 使用以下两种值中的一种：
<ul><li>控制台应用程序的文件路径（其中的 <code>\</code> 会替换成 <code>_</code>）</li> <li>控制台应用程序的标题</li></ul></li> <li>Windows 快捷方式（.lnk）中的设置</li></ol> <figure data-type="image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" alt="注册表中的控制台设置键值" data-src="/uploads/2019/02/20190218003.png"><figcaption>注册表中的控制台设置键值</figcaption></figure> <p>当一个控制台应用程序被启动后，ConHost 会依据加载情况决定使用哪些设置，同时会按照前述的层级先后对一些进行覆盖。每一个设置项将取其最后加载的值，也就是说在第 4 级（Windows 快捷方式）中的值会覆盖掉第 2 级（用户定义的默认设置）中的值。</p> <p>这样一个层级设计解释了为什么在每个控制台实例窗口的标题菜单中，都会有一个“默认值”
选项以及一个“属性”选项。</p> <figure data-type="image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" alt="控制台窗口标题菜单" data-src="/uploads/2019/02/20190218002.png"><figcaption>控制台窗口标题菜单</figcaption></figure> <p>修改“默认值”时，改动会存储到注册表 <code>HKCU\Console</code> 中，写入用户定义默认设置（即前述层级中的第 2 级）。</p> <p>修改“属性”时，改动会存储到注册表中的控制台应用程序单独设置或者 Windows 快捷方式中：</p> <ul><li>如果这个控制台应用程序是被直接（比如是从 Win+R，Windows 运行对话中）启动的，则改动会存储到前述的控制台应用程序单独存储位置（层级中的第 3 级）中。</li> <li>如果这个控制台应用程序是通过 Windows 快捷方式被启动的，则改动会直接存储到这个快捷方式 .lnk 文件中（层级中的第 4 级）。你可以右键这个控制台应用程序的快捷方式，选择“属性”查看其设置。</li></ul> <figure data-type="image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" alt="快捷方式中的设置" data-src="/uploads/2019/02/20190218004.png"><figcaption>快捷方式中的设置</figcaption></figure> <p>当一个控制台应用程序被启动后，ConHost 会根据前述的层级，从第 1 级写死的默认设置开始覆盖设置，最后确定使用哪些设置。这意味着在 Windows 快捷方式中的设置会覆盖掉注册表中的控制台应用程序单独设置以及默认设置。</p> <p>值得注意的是在注册表中的设置是“稀疏”的，意味着如果某个设置项为空，则不会修改正在使用的值。这允许用户在所有控制台应用程序之间共享部分设置项的同时指定其它一些特定设置项。</p> <p>而快捷方式文件则会将每个设置项都存储其中，不管是否有默认设置。这些设置会以不透明的数据块存储在快捷方式中。</p> <p>下面是 Windows 控制台的设置列表，包含了简短的描述以介绍其作用。</p> <table><thead><tr><th>设置项名字</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>FontSize</td> <td>Coordinate (REG_DWORD)</td> <td>字体像素大小</td></tr> <tr><td>FontFamily</td> <td>REG_DWORD</td> <td>GDI 字体族</td></tr> <tr><td>ScreenBufferSize</td> <td>Coordinate (REG_DWORD)</td> <td>屏幕缓冲区大小，宽x高个字符</td></tr> <tr><td>CursorSize</td> <td>REG_DWORD</td> <td>光标大小</td></tr> <tr><td>WindowSize</td> <td>Coordinate (REG_DWORD)</td> <td>窗口大小，宽x高个字符</td></tr> <tr><td>WindowPosition</td> <td>Coordinate (REG_DWORD)</td> <td>窗口位置，宽x高个像素（如果没有设置则进行自动定位）</td></tr> <tr><td>WindowAlpha</td> <td>REG_DWORD</td> <td>窗口透明度（取值范围：0x4D-0xFF）</td></tr> <tr><td>ScreenColors</td> <td>REG_DWORD</td> <td>前景色与背景色</td></tr> <tr><td>PopupColors</td> <td>REG_DWORD</td> <td>显示弹窗（CMD.exe 按 F2）时的前景色与背景色</td></tr> <tr><td>QuickEdit</td> <td>REG_DWORD</td> <td>快速编辑模式是否开启</td></tr> <tr><td>FaceName</td> <td>REG_SZ</td> <td>字体名字 (默认使用 <code>__DefaultTTFont__</code>，根据你的代码页 CodePage 选择最合适的字体）</td></tr> <tr><td>FontWeight</td> <td>REG_DWORD</td> <td>GDI 字重</td></tr> <tr><td>InsertMode</td> <td>REG_DWORD</td> <td>插入模式是否开启</td></tr> <tr><td>HistoryBufferSize</td> <td>REG_DWORD</td> <td>命令记录缓冲区大小</td></tr> <tr><td>NumberOfHistoryBuffers</td> <td>REG_DWORD</td> <td>命令记录缓冲区数量</td></tr> <tr><td>HistoryNoDup</td> <td>REG_DWORD</td> <td>是否丢弃旧的副本</td></tr> <tr><td>ColorTable%%</td> <td>REG_DWORD</td> <td>16 色的调色盘中每个颜色的 RGB 值</td></tr> <tr><td>ExtendedEditKey</td> <td>REG_DWORD</td> <td>是否启用扩展的文本选择键</td></tr> <tr><td>WordDelimiters</td> <td>REG_SZ</td> <td>分词符列表（例：<code>' .-/\=|,()[]{}'</code>）</td></tr> <tr><td>TrimLeadingZeros</td> <td>REG_DWORD</td> <td>选取复制文字时是否删除首部零宽字符（使用 <code>00000001</code> 表示 <code>1</code>）</td></tr> <tr><td>EnableColorSelection</td> <td>REG_DWORD</td> <td>选择时是否同时复制颜色</td></tr> <tr><td>ScrollScale</td> <td>REG_DWORD</td> <td>使用滚轮滚动时一次滚动多少行</td></tr> <tr><td>CodePage</td> <td>REG_DWORD</td> <td>代码页 CodePage</td></tr> <tr><td>ForceV2</td> <td>REG_DWORD</td> <td>是否使用新版控制台</td></tr> <tr><td>LineSelection*</td> <td>REG_DWORD</td> <td>是否启用对选定内容自动换行</td></tr> <tr><td>FilterOnPaste*</td> <td>REG_DWORD</td> <td>是否在粘贴时筛选剪贴板内容（如：将弯引号替换为直引号）</td></tr> <tr><td>LineWrap</td> <td>REG_DWORD</td> <td>是否在调整窗口大小时对输出的文本换行</td></tr> <tr><td>CtrlKeyShortcutsDisabled</td> <td>REG_DWORD</td> <td>是否启用 Ctrl 键快捷方式</td></tr> <tr><td>AllowAltF4Close</td> <td>REG_DWORD</td> <td>是否禁用 Alt-F4 热键</td></tr> <tr><td>VirtualTerminalLevel</td> <td>REG_DWORD</td> <td>控制台 VT 支持级别</td></tr></tbody></table> <p>*仅在新版控制台中有效</p> <h2 id="%E5%B7%B2%E7%9F%A5%E9%97%AE%E9%A2%98">已知问题</h2> <p>与大多数复杂的事物一样，有一些问题需要注意：</p> <h3 id="%E7%B3%BB%E7%BB%9F%E6%9B%B4%E6%96%B0%E4%BC%9A%E5%AF%BC%E8%87%B4%E8%AE%BE%E7%BD%AE%E8%A2%AB%E9%87%8D%E7%BD%AE">系统更新会导致设置被重置</h3> <p>每当你升级到新版本的 Windows 时，系统级的快捷方式以及“「开始」菜单”中的设置会被重置为默认值。这意味着如果你升级了系统，你自定义的字体、颜色等设置将会全部重置为
Windows 的默认值。</p> <h2 id="%E5%90%8E%E8%AE%B0">后记</h2> <p>我一直在使用 <a href="https://github.com/lukesampson/concfg" target="_blank" rel="noopener noreferrer">concfg</a> 作为我管理我的
Windows 控制台设置的工具，近期成为了该项目的协作者进行项目维护，便开始稍微深入地了解 Windows 控制台相关知识。本文是微软官方 Windows Console &amp; WSL 团队的一篇博文的译文，原文见 <a href="https://blogs.msdn.microsoft.com/commandline/2017/06/20/understanding-windows-console-host-settings/" target="_blank" rel="noopener noreferrer">Understanding Windows Console Host Settings</a>，有些许删改。</p> <hr class="footnotes-sep"> <section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>在 Wikipedia 上也称 <a href="https://zh.wikipedia.org/wiki/Win32%E6%8E%A7%E5%88%B6%E5%8F%B0" target="_blank" rel="noopener noreferrer">Win32 控制台</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li> <li id="fn2" class="footnote-item"><p>注意“控制台”与“控制台应用程序”的区别，前者指 ConHost 宿主程序，后者是运行在 ConHost 下的应用，如 cmd.exe/powershell.exe <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section></section> <section class="post-comments"><div id="load-disqus" style="display:;"><a title="Load Disqus">Leave a comment</a></div> <div id="disqus_thread"></div></section> <footer class="post-footer"></footer></article></div></main> <footer id="site-footer" class="site-footer"><div class="wrap"><div class="footer__section"><nav class="footer-nav"><ul><li><a href="/" class="router-link-active"><a href="/">Home</a></a></li><li><a href="/about"><a href="/about">About</a></a></li><li><a href="/guestbook"><a href="/guestbook">Guestbook</a></a></li><li><a href="/links"><a href="/links">Links</a></a></li><li><a href="/blog/atom.xml" target="_blank" rel="noopener">RSS</a></li></ul></nav></div> <div class="footer__section"><div class="social-network"><ul><li><a href="https://twitter.com/h404bi" target="_blank" rel="noopener" class="icon ion-logo-twitter"></a></li><li><a href="https://www.instagram.com/chawyehsu/" target="_blank" rel="noopener" class="icon ion-logo-instagram"></a></li><li><a href="https://github.com/h404bi" target="_blank" rel="noopener" class="icon ion-logo-github"></a></li><li><a href="https://steamcommunity.com/id/h404bi/" target="_blank" rel="noopener" class="icon ion-logo-game-controller-b"></a></li><li><a href="https://music.163.com/#/user/home?id=35631431" target="_blank" rel="noopener" class="icon ion-ios-musical-notes"></a></li></ul></div></div> <div class="footer__section"><div class="copy-right">© 2015-2019 h404bi</div></div></div></footer></div></div><script src="/_saber/js/client.424fd86b.js" defer></script><script src="/_saber/js/page--_posts-2019-02-18-understanding-windows-console-host-settings-md.48273baf.js" defer></script></body></html>
